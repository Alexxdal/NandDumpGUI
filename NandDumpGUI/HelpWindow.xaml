<Window x:Class="NandDumpGUI.HelpWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="User Guide"
        Height="620" Width="820"
        WindowStartupLocation="CenterOwner">
    <Grid Margin="12">
        <TabControl>
            <TabItem Header="Quick Start">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <TextBlock TextWrapping="Wrap" FontSize="14">
                        <Run Text="Quick Start" FontWeight="Bold"/>
                        <LineBreak/><LineBreak/>
                        <Run Text="1) Select an Input RAW dump (pages stored as PageSize + OobSize bytes)."/>
                        <LineBreak/>
                        <Run Text="2) Choose Output data (data-only pages)."/>
                        <LineBreak/>
                        <Run Text="3) (Optional) Enable 'Save fixed RAW' and choose a Fixed RAW output path."/>
                        <LineBreak/>
                        <Run Text="4) Set primitive poly and t (most Broadcom dumps use poly=0x5803 and t=4)."/>
                        <LineBreak/>
                        <Run Text="5) Set Transform (try none, then inv, bitrev, inv+bitrev if decode fails)."/>
                        <LineBreak/>
                        <Run Text="6) Set OOB data bytes (Broadcom often 9)."/>
                        <LineBreak/>
                        <Run Text="7) Press Start and monitor the log."/>
                        <LineBreak/><LineBreak/>
                        <Run Text="Tip: If the file size is not a multiple of RAW_PAGE, your dump is not 'adjacent page+oob'."/>
                    </TextBlock>
                </ScrollViewer>
            </TabItem>

            <TabItem Header="Parameters">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <TextBlock TextWrapping="Wrap" FontSize="14" Margin="0,0,0,10">
                            <Run Text="Parameters Explained" FontWeight="Bold"/>
                        </TextBlock>

                        <TextBlock TextWrapping="Wrap" Margin="0,0,0,10">
                            <Run Text="Primitive poly:" FontWeight="Bold"/>
                            <Run Text=" Primitive polynomial for GF(2^m). Common Broadcom value is 0x5803."/>
                        </TextBlock>

                        <TextBlock TextWrapping="Wrap" Margin="0,0,0,10">
                            <Run Text="t:" FontWeight="Bold"/>
                            <Run Text=" BCH strength (number of correctable bit errors). Common value: 4."/>
                        </TextBlock>

                        <TextBlock TextWrapping="Wrap" Margin="0,0,0,10">
                            <Run Text="Transform:" FontWeight="Bold"/>
                            <Run Text=" How ECC bytes are stored by the vendor. 'inv' flips bits, 'bitrev' reverses bit order, 'inv+bitrev' does both."/>
                        </TextBlock>

                        <TextBlock TextWrapping="Wrap" Margin="0,0,0,10">
                            <Run Text="OOB data bytes:" FontWeight="Bold"/>
                            <Run Text=" Number of OOB bytes that are part of the codeword (message) per sector. Broadcom typical: 9."/>
                        </TextBlock>

                        <TextBlock TextWrapping="Wrap" Margin="0,0,0,10">
                            <Run Text="PageSize / OobSize:" FontWeight="Bold"/>
                            <Run Text=" Data and spare sizes per page (e.g., 2048 + 64)."/>
                        </TextBlock>

                        <TextBlock TextWrapping="Wrap" Margin="0,0,0,10">
                            <Run Text="SectorSize / EccSteps:" FontWeight="Bold"/>
                            <Run Text=" ECC works per sector (usually 512). EccSteps = PageSize / SectorSize."/>
                        </TextBlock>

                        <TextBlock TextWrapping="Wrap" Margin="0,0,0,10">
                            <Run Text="OobChunk / ECC offset / ECC length:" FontWeight="Bold"/>
                            <Run Text=" Layout of OOB per sector. Example: OobChunk=16, ECC starts at offset 9, length 7 bytes."/>
                        </TextBlock>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem Header="Troubleshooting">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <TextBlock TextWrapping="Wrap" FontSize="14">
                        <Run Text="Troubleshooting" FontWeight="Bold"/>
                        <LineBreak/><LineBreak/>

                        <Run Text="• Error: file size not multiple of RAW_PAGE" FontWeight="Bold"/>
                        <LineBreak/>
                        <Run Text="  Your dump is not stored as adjacent (page+oob). You may need to re-export the dump including OOB."/>
                        <LineBreak/><LineBreak/>

                        <Run Text="• Many uncorrectable sectors" FontWeight="Bold"/>
                        <LineBreak/>
                        <Run Text="  Try changing Transform (none/inv/bitrev/inv+bitrev) and verify OOB layout values."/>
                        <LineBreak/><LineBreak/>

                        <Run Text="• Output looks corrupted" FontWeight="Bold"/>
                        <LineBreak/>
                        <Run Text="  Check that PageSize, SectorSize, OobChunk and ECC offsets match your NAND controller layout."/>
                        <LineBreak/><LineBreak/>
                    </TextBlock>
                </ScrollViewer>
            </TabItem>
        </TabControl>
    </Grid>
</Window>
